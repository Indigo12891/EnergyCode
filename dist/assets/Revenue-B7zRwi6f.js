import{j as w,q as A,d as j,z as E,b as $,f as e,a,r as u,g as t,t as _,i as r,w as q,A as M,c as O,k,o as D}from"./index-CQiJAfLM.js";import{r as G,c as H}from"./chargingstation-Dej0EphK.js";import{u as J}from"./useChart-z8StxURj.js";function b(f){if(isNaN(f)||typeof f!="number")throw new Error("必须是一个有效数字");const[c,v]=f.toString().split(".");let s="";for(let p=c.length-1;p>=0;p--)s=c[p]+s,(c.length-p)%3===0&&p!==0&&(s=","+s);return v?`${s}.${v}`:s}function K(f,c=10){const v=w(0),s=A({page:1,pageSize:c});return{totals:v,pageInfo:s,handleSizeChange:i=>{s.pageSize=i,f()},handleCurrentChange:i=>{s.page=i,f()},resetPagination:()=>{s.page=1,s.pageSize=c},setTotals:i=>{v.value=i}}}const L={class:"title"},Q={class:"round"},W={class:"total mt"},X={class:"title"},Y={class:"round"},Z={class:"total mt"},ee={class:"title"},te={class:"round"},le={class:"title"},ae={class:"round"},ne={class:"total mt"},oe={class:"title"},se={class:"round"},re={class:"total mt"},ie={class:"title"},de={class:"round"},ue={class:"total mt"},me=j({__name:"Revenue",setup(f){const c=w(null);J(c,async()=>{const m=A({tooltip:{trigger:"axis"},legend:{data:[]},xAxis:{type:"category",data:["一月","二月","三月","四月","五月","六月","七月"]},yAxis:[{type:"value",name:"销售",position:"left"},{type:"value",name:"访问量",position:"right"}],series:[{name:"",type:"bar",data:[],yAxisIndex:0,itemStyle:{color:"#409eff"}},{name:"",type:"line",data:[],yAxisIndex:1,itemStyle:{color:"#409eff"},smooth:!0}]}),l=await H();m.legend.data=l.data.list.map(n=>n.name);for(let n=0;n<l.data.list.length;n++)m.series[n].name=l.data.list[n].name,m.series[n].data=l.data.list[n].data;return m});const s=w(""),p=w([]),C=w(!1),x=async()=>{C.value=!0;const{data:{list:m,total:l}}=await G({...i,name:s.value});T(l),C.value=!1,p.value=m,p.value=m.map(n=>({...n,day:n.electricity+n.parkingFee+n.serviceFee+n.member}))},{totals:z,pageInfo:i,handleCurrentChange:I,handleSizeChange:N,setTotals:T}=K(x);return E(()=>{x()}),(m,l)=>{const n=u("Document"),h=u("el-icon"),g=u("el-card"),y=u("el-col"),V=u("el-row"),P=u("el-button"),B=u("el-input"),d=u("el-table-column"),S=u("el-tag"),F=u("el-table"),R=u("el-pagination"),U=M("loading");return D(),$("div",null,[e(V,{gutter:20},{default:a(()=>[e(y,{span:4},{default:a(()=>[e(g,null,{default:a(()=>[t("div",L,[t("div",Q,[e(h,null,{default:a(()=>[e(n)]),_:1})]),l[3]||(l[3]=t("h4",null,"今日总收入（元）",-1))]),t("div",W,[t("h1",null,_(r(b)(12239824)),1),l[4]||(l[4]=t("div",{class:"percent"},"-21%",-1))])]),_:1})]),_:1}),e(y,{span:4},{default:a(()=>[e(g,null,{default:a(()=>[t("div",X,[t("div",Y,[e(h,null,{default:a(()=>[e(n)]),_:1})]),l[5]||(l[5]=t("h4",null,"本月总收入 (万元)",-1))]),t("div",Z,[t("h1",null,_(r(b)(2924)),1),l[6]||(l[6]=t("div",{class:"percent"},"-21%",-1))])]),_:1})]),_:1}),e(y,{span:4},{default:a(()=>[e(g,null,{default:a(()=>[t("div",ee,[t("div",te,[e(h,null,{default:a(()=>[e(n)]),_:1})]),l[7]||(l[7]=t("h4",null,"会员卡储值金额 (元)",-1))]),l[8]||(l[8]=t("div",{class:"total mt"},[t("h1",null,"239,824"),t("div",{class:"percent"},"-16%")],-1))]),_:1})]),_:1}),e(y,{span:4},{default:a(()=>[e(g,null,{default:a(()=>[t("div",le,[t("div",ae,[e(h,null,{default:a(()=>[e(n)]),_:1})]),l[9]||(l[9]=t("h4",null,"服务费总金额 (元)",-1))]),t("div",ne,[t("h1",null,_(r(b)(16824)),1),l[10]||(l[10]=t("div",{class:"percent"},"-7%",-1))])]),_:1})]),_:1}),e(y,{span:4},{default:a(()=>[e(g,null,{default:a(()=>[t("div",oe,[t("div",se,[e(h,null,{default:a(()=>[e(n)]),_:1})]),l[11]||(l[11]=t("h4",null,"停车费总金额 (元)",-1))]),t("div",re,[t("h1",null,_(r(b)(9687)),1),l[12]||(l[12]=t("div",{class:"percent"},"-4%",-1))])]),_:1})]),_:1}),e(y,{span:4},{default:a(()=>[e(g,null,{default:a(()=>[t("div",ie,[t("div",de,[e(h,null,{default:a(()=>[e(n)]),_:1})]),l[13]||(l[13]=t("h4",null,"电费总金额 (元)",-1))]),t("div",ue,[t("h1",null,_(r(b)(223674)),1),l[14]||(l[14]=t("div",{class:"percent"},"-19%",-1))])]),_:1})]),_:1})]),_:1}),e(g,{class:"mt"},{default:a(()=>[t("div",{ref_key:"chartRef",ref:c,style:{width:"100%",height:"300px"}},null,512)]),_:1}),e(g,{class:"mt"},{default:a(()=>[e(B,{modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=o=>s.value=o),style:{"max-width":"400px"},placeholder:"请输入站点名称"},{append:a(()=>[e(P,{icon:"Search",onClick:x})]),_:1},8,["modelValue"]),q((D(),O(F,{data:p.value},{default:a(()=>[e(d,{type:"index",label:"序号",width:"80"}),e(d,{label:"充电站名称",prop:"name"}),e(d,{label:"充电站ID",prop:"id"}),e(d,{label:"所属城市",prop:"city"}),e(d,{label:"充电桩总量(个)",prop:"count"}),e(d,{label:"单日总收入(元)",prop:"day",sortable:""},{default:a(o=>[t("span",null,_(o.row.day),1),e(S,{type:o.row.percent>0?"danger":"success",class:"ml"},{default:a(()=>[k(_(o.row.percent>0?"+"+o.row.percent+"%":o.row.percent+"%"),1)]),_:2},1032,["type"])]),_:1}),e(d,{label:"月度总收入(万元)",prop:"month"},{default:a(o=>[t("span",null,_(o.row.month),1),e(S,{type:o.row.mpercent>0?"danger":"success",class:"ml"},{default:a(()=>[k(_(o.row.mpercent>0?"+"+o.row.mpercent+"%":o.row.mpercent+"%"),1)]),_:2},1032,["type"])]),_:1}),e(d,{label:"电费营收(元)",prop:"electricity"}),e(d,{label:"停车费营收(元)",prop:"parkingFee"}),e(d,{label:"服务费营收(元)",prop:"serviceFee"}),e(d,{label:"会员储值金(元)",prop:"member"})]),_:1},8,["data"])),[[U,C.value]]),e(R,{class:"fr mt mb","current-page":r(i).page,"onUpdate:currentPage":l[1]||(l[1]=o=>r(i).page=o),"page-size":r(i).pageSize,"onUpdate:pageSize":l[2]||(l[2]=o=>r(i).pageSize=o),"page-sizes":[10,20,30,40],layout:"sizes, prev, pager, next, jumper,total",total:r(z),onSizeChange:r(N),onCurrentChange:r(I),background:""},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])]),_:1})])}}});export{me as default};
