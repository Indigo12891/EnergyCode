import{x as L,j as _,d as P,q as E,s as O,y as Q,c as U,a as l,r as u,f as e,g as W,k as f,o as C,E as j,z as X,b as Y,F as Z,n as x}from"./index-CQiJAfLM.js";import{e as h,l as ee,d as le}from"./chargingstation-Dej0EphK.js";const T=L("station",()=>{const k=_({name:"",id:"",city:"",fast:"",slow:"",status:1,now:"",fault:"",person:"",tel:""});return{rowData:k,setRowData:i=>{k.value=i}}}),te={class:"dialog-footer"},ae=P({__name:"StationForm",props:{dialogVisible:{type:Boolean,required:!0}},emits:["close","reload"],setup(k,{emit:V}){const i=k,a=_({name:"",id:"",city:"",fast:"",slow:"",status:1,now:"",fault:"",person:"",tel:""}),R=E({name:[{required:!0,message:"站点名称不能为空",trigger:"blur"}],id:[{required:!0,message:"站点id不能为空",trigger:"blur"}],city:[{required:!0,message:"所属城市不能为空",trigger:"blur"}],person:[{required:!0,message:"站点负责人不能为空",trigger:"blur"}],tel:[{required:!0,message:"负责人电话不能为空",trigger:"blur"}],fast:[{required:!0,message:"快充数不能为空",trigger:"blur"}],slow:[{required:!0,message:"慢充数不能为空",trigger:"blur"}],status:[{required:!0,message:"充电站状态不能为空",trigger:"blur"}],now:[{required:!0,message:"正在充电数不能为空",trigger:"blur"}],fault:[{required:!0,message:"故障数量不能为空",trigger:"blur"}]}),q=V,z=()=>{q("close")},v=_(""),c=_(!1),M=T(),{rowData:B}=O(M);Q(()=>i.dialogVisible,()=>{B.value.name?(v.value="编辑充电站信息",c.value=!0):(v.value="新增充电站信息",c.value=!1),a.value=B.value});const w=_(),N=()=>{var S;(S=w.value)==null||S.validate(async o=>{if(o){const d=await h(a.value);d.code==200&&(j({message:d.data,type:"success"}),z(),q("reload"))}})};return(S,o)=>{const d=u("el-input"),p=u("el-form-item"),r=u("el-col"),t=u("el-option"),b=u("el-select"),A=u("el-row"),$=u("el-form"),g=u("el-button"),y=u("el-dialog");return C(),U(y,{"model-value":k.dialogVisible,title:v.value,onClose:z,"destroy-on-close":""},{footer:l(()=>[W("div",te,[e(g,{onClick:z},{default:l(()=>o[10]||(o[10]=[f("取消")])),_:1}),e(g,{type:"primary",onClick:N},{default:l(()=>o[11]||(o[11]=[f(" 确认 ")])),_:1})])]),default:l(()=>[e($,{"label-width":"120",rules:R,model:a.value,ref_key:"formRef",ref:w},{default:l(()=>[e(A,null,{default:l(()=>[e(r,{span:12},{default:l(()=>[e(p,{label:"站点名称:",prop:"name"},{default:l(()=>[e(d,{modelValue:a.value.name,"onUpdate:modelValue":o[0]||(o[0]=n=>a.value.name=n)},null,8,["modelValue"])]),_:1}),e(p,{label:"站点id:",prop:"id"},{default:l(()=>[e(d,{modelValue:a.value.id,"onUpdate:modelValue":o[1]||(o[1]=n=>a.value.id=n),disabled:c.value},null,8,["modelValue","disabled"])]),_:1}),e(p,{label:"所属城市：",prop:"city"},{default:l(()=>[e(d,{modelValue:a.value.city,"onUpdate:modelValue":o[2]||(o[2]=n=>a.value.city=n)},null,8,["modelValue"])]),_:1}),e(p,{label:"站点负责人：",prop:"person"},{default:l(()=>[e(d,{modelValue:a.value.person,"onUpdate:modelValue":o[3]||(o[3]=n=>a.value.person=n)},null,8,["modelValue"])]),_:1}),e(p,{label:"负责人电话：",prop:"tel"},{default:l(()=>[e(d,{modelValue:a.value.tel,"onUpdate:modelValue":o[4]||(o[4]=n=>a.value.tel=n)},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{span:12},{default:l(()=>[e(p,{label:"快充数：",prop:"fast"},{default:l(()=>[e(d,{modelValue:a.value.fast,"onUpdate:modelValue":o[5]||(o[5]=n=>a.value.fast=n)},null,8,["modelValue"])]),_:1}),e(p,{label:"慢充数：",prop:"slow"},{default:l(()=>[e(d,{modelValue:a.value.slow,"onUpdate:modelValue":o[6]||(o[6]=n=>a.value.slow=n)},null,8,["modelValue"])]),_:1}),e(p,{label:"充电站状态：",prop:"status"},{default:l(()=>[e(b,{placeholder:"充电站状态",modelValue:a.value.status,"onUpdate:modelValue":o[7]||(o[7]=n=>a.value.status=n),disabled:c.value},{default:l(()=>[e(t,{label:"全部",value:1}),e(t,{label:"使用中",value:2}),e(t,{label:"空闲中",value:3}),e(t,{label:"维护中",value:4}),e(t,{label:"待维修",value:5})]),_:1},8,["modelValue","disabled"])]),_:1}),e(p,{label:"正在充电：",prop:"now"},{default:l(()=>[e(d,{modelValue:a.value.now,"onUpdate:modelValue":o[8]||(o[8]=n=>a.value.now=n),disabled:c.value},null,8,["modelValue","disabled"])]),_:1}),e(p,{label:"故障数：",prop:"fault"},{default:l(()=>[e(d,{modelValue:a.value.fault,"onUpdate:modelValue":o[9]||(o[9]=n=>a.value.fault=n),disabled:c.value},null,8,["modelValue","disabled"])]),_:1})]),_:1})]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["model-value","title"])}}}),ue=P({__name:"Monitor",setup(k){const V=_("name"),i=E({input:"",value:1}),a=E({page:1,pageSize:10}),R=_([]),q=_(0),z=_(!1),v=async()=>{z.value=!0;const{data:{list:r,total:t}}=await ee({...a,status:i.value,[V.value]:i.input});z.value=!1,R.value=r,q.value=t};X(()=>{v()});const c=r=>{console.log("handleSizeChange",r),a.pageSize=r,v()},M=r=>{console.log("handleCurrentChange",r),a.page=r,v()},B=()=>{a.page=1,a.pageSize=10,i.input="",i.value=1,V.value="name",v()},w=_(!1),N=T(),{setRowData:S}=N,o=r=>{S(r),w.value=!0},d=()=>{S({name:"",id:"",city:"",fast:"",slow:"",status:1,now:"",fault:"",person:"",tel:""}),w.value=!0},p=async r=>{const t=await le(r);t.code==200&&j({message:t.data,type:"success"}),v()};return(r,t)=>{const b=u("el-option"),A=u("el-select"),$=u("el-input"),g=u("el-col"),y=u("el-button"),n=u("el-row"),F=u("el-card"),I=u("el-statistic"),m=u("el-table-column"),D=u("el-tag"),G=u("el-popconfirm"),H=u("el-table"),J=u("el-pagination");return C(),Y(Z,null,[e(F,null,{default:l(()=>[e(n,{gutter:20},{default:l(()=>[e(g,{span:6},{default:l(()=>[e($,{modelValue:i.input,"onUpdate:modelValue":t[1]||(t[1]=s=>i.input=s),modelModifiers:{trim:!0},placeholder:"请输入站点名称\\ID"},{append:l(()=>[e(A,{modelValue:V.value,"onUpdate:modelValue":t[0]||(t[0]=s=>V.value=s),style:{width:"115px"}},{default:l(()=>[e(b,{label:"按名称查询",value:"name"}),e(b,{label:"按ID查询",value:"id"})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),e(g,{span:6},{default:l(()=>[e(A,{placeholder:"充电站状态",modelValue:i.value,"onUpdate:modelValue":t[2]||(t[2]=s=>i.value=s)},{default:l(()=>[e(b,{label:"全部",value:1}),e(b,{label:"使用中",value:2}),e(b,{label:"空闲中",value:3}),e(b,{label:"维护中",value:4}),e(b,{label:"待维修",value:5})]),_:1},8,["modelValue"])]),_:1}),e(g,{span:6},{default:l(()=>[e(y,{type:"primary",onClick:v},{default:l(()=>t[6]||(t[6]=[f("查询")])),_:1}),e(y,{onClick:B},{default:l(()=>t[7]||(t[7]=[f("重置")])),_:1})]),_:1})]),_:1})]),_:1}),e(F,{class:"mt"},{default:l(()=>[e(n,null,{default:l(()=>[e(g,{span:6},{default:l(()=>[e(I,{title:"累计充电量(度)",value:268900})]),_:1}),e(g,{span:6},{default:l(()=>[e(I,{title:"累计充电次数(次)",value:1389})]),_:1}),e(g,{span:6},{default:l(()=>[e(I,{title:"服务区域(个)",value:88})]),_:1}),e(g,{span:6},{default:l(()=>[e(I,{title:"累计效益(元)",value:5622178})]),_:1})]),_:1})]),_:1}),e(F,{class:"mt"},{default:l(()=>[e(y,{type:"primary",icon:"Plus",onClick:d},{default:l(()=>t[8]||(t[8]=[f("新增充电站")])),_:1})]),_:1}),e(F,{class:"mt"},{default:l(()=>[e(H,{data:R.value},{default:l(()=>[e(m,{type:"index",width:"80",label:"序号"}),e(m,{prop:"name",label:"站点名称"}),e(m,{prop:"id",label:"站点ID"}),e(m,{prop:"city",label:"所属城市"}),e(m,{prop:"fast",label:"快充数"}),e(m,{prop:"slow",label:"慢充数"}),e(m,{prop:"status",label:"充电站状态"},{default:l(s=>[s.row.status==1?(C(),U(D,{key:0,type:"info"},{default:l(()=>t[9]||(t[9]=[f("未知中")])),_:1})):x("",!0),s.row.status==2?(C(),U(D,{key:1,type:"primary"},{default:l(()=>t[10]||(t[10]=[f("使用中")])),_:1})):x("",!0),s.row.status==3?(C(),U(D,{key:2,type:"success"},{default:l(()=>t[11]||(t[11]=[f("空闲中")])),_:1})):x("",!0),s.row.status==4?(C(),U(D,{key:3,type:"warning"},{default:l(()=>t[12]||(t[12]=[f("维护中")])),_:1})):x("",!0),s.row.status==5?(C(),U(D,{key:4,type:"danger"},{default:l(()=>t[13]||(t[13]=[f("待维修")])),_:1})):x("",!0)]),_:1}),e(m,{prop:"now",label:"正在充电"}),e(m,{prop:"fault",label:"故障数"}),e(m,{prop:"person",label:"站点负责人"}),e(m,{prop:"tel",label:"负责人电话"}),e(m,{label:"操作"},{default:l(s=>[e(y,{type:"primary",size:"small",onClick:K=>o(s.row)},{default:l(()=>t[14]||(t[14]=[f("编辑")])),_:2},1032,["onClick"]),e(G,{title:"确定要删除当前站点吗？",onConfirm:K=>p(s.row.id)},{reference:l(()=>[e(y,{type:"danger",size:"small"},{default:l(()=>t[15]||(t[15]=[f("删除")])),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])]),_:1}),e(J,{class:"fr mt mb","current-page":a.page,"onUpdate:currentPage":t[3]||(t[3]=s=>a.page=s),"page-size":a.pageSize,"onUpdate:pageSize":t[4]||(t[4]=s=>a.pageSize=s),"page-sizes":[10,20,30,40],layout:"sizes, prev, pager, next, jumper,total",total:q.value,onSizeChange:c,onCurrentChange:M,background:""},null,8,["current-page","page-size","total"]),e(ae,{"dialog-visible":w.value,onClose:t[5]||(t[5]=s=>w.value=!1),onReload:v},null,8,["dialog-visible"])],64)}}});export{ue as default};
