import{y as P,d as T,M as G,j as O,z as K,B as q,N as Q,O as W,P as x,Q as R,p as J,b as L,f as E,w as X,a as p,r as A,i as Y,c as V,F as B,g as _,k as S,e as I,t as M,A as Z,o as g,_ as ee}from"./index-CQiJAfLM.js";var ne=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],te=function(e){return ne.map(function(o){return o.toLowerCase()}).indexOf(e.toLowerCase())!==-1},oe=function(e,o,t){Object.keys(o).filter(te).forEach(function(r){var a=o[r];typeof a=="function"&&(r==="onInit"?a(e,t):t.on(r.substring(2),function(u){return a(u,t)}))})},ae=function(e,o,t,r){var a=e.modelEvents?e.modelEvents:null,u=Array.isArray(a)?a.join(" "):a;P(r,function(c,v){t&&typeof c=="string"&&c!==v&&c!==t.getContent({format:e.outputFormat})&&t.setContent(c)}),t.on(u||"change input undo redo",function(){o.emit("update:modelValue",t.getContent({format:e.outputFormat}))})},re=function(e,o,t,r,a,u){r.setContent(u()),t.attrs["onUpdate:modelValue"]&&ae(o,t,r,a),oe(e,t.attrs,r)},N=0,$=function(e){var o=Date.now(),t=Math.floor(Math.random()*1e9);return N++,e+"_"+t+N+String(o)},ie=function(e){return e!==null&&e.tagName.toLowerCase()==="textarea"},z=function(e){return typeof e>"u"||e===""?[]:Array.isArray(e)?e:e.split(" ")},le=function(e,o){return z(e).concat(z(o))},ue=function(e){return e==null},F=function(){return{listeners:[],scriptId:$("tiny-script"),scriptLoaded:!1}},se=function(){var e=F(),o=function(a,u,c,v){var l=u.createElement("script");l.referrerPolicy="origin",l.type="application/javascript",l.id=a,l.src=c;var s=function(){l.removeEventListener("load",s),v()};l.addEventListener("load",s),u.head&&u.head.appendChild(l)},t=function(a,u,c){e.scriptLoaded?c():(e.listeners.push(c),a.getElementById(e.scriptId)||o(e.scriptId,a,u,function(){e.listeners.forEach(function(v){return v()}),e.scriptLoaded=!0}))},r=function(){e=F()};return{load:t,reinitialize:r}},de=se(),ce=function(){return typeof window<"u"?window:global},w=function(){var e=ce();return e&&e.tinymce?e.tinymce:null},ve={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(e){return e==="html"||e==="text"}}},C=function(){return C=Object.assign||function(e){for(var o,t=1,r=arguments.length;t<r;t++){o=arguments[t];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a])}return e},C.apply(this,arguments)},fe=function(e,o,t,r){return e(r||"div",{id:o,ref:t})},me=function(e,o,t){return e("textarea",{id:o,visibility:"hidden",ref:t})},j={selector:void 0,target:void 0},ye=T({props:ve,setup:function(e,o){var t=e.init?C(C({},e.init),j):C({},j),r=G(e),a=r.disabled,u=r.modelValue,c=r.tagName,v=O(null),l=null,s=e.id||$("tiny-vue"),n=e.init&&e.init.inline||e.inline,f=!!o.attrs["onUpdate:modelValue"],b=!0,k=e.initialValue?e.initialValue:"",h="",U=function(d){return f?function(){return u!=null&&u.value?u.value:""}:function(){return d?k:h}},i=function(){var d=U(b),m=C(C({},t),{readonly:e.disabled,target:v.value,plugins:le(t.plugins,e.plugins),toolbar:e.toolbar||t.toolbar,inline:n,setup:function(D){l=D,D.on("init",function(H){return re(H,e,o,D,u,d)}),typeof t.setup=="function"&&t.setup(D)}});ie(v.value)&&(v.value.style.visibility=""),w().init(m),b=!1};P(a,function(d){var m;l!==null&&(typeof((m=l.mode)===null||m===void 0?void 0:m.set)=="function"?l.mode.set(d?"readonly":"design"):l.setMode(d?"readonly":"design"))}),P(c,function(d){var m;f||(h=l.getContent()),(m=w())===null||m===void 0||m.remove(l),R(function(){return i()})}),K(function(){if(w()!==null)i();else if(v.value&&v.value.ownerDocument){var d=e.cloudChannel?e.cloudChannel:"6",m=e.apiKey?e.apiKey:"no-api-key",D=ue(e.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/".concat(m,"/tinymce/").concat(d,"/tinymce.min.js"):e.tinymceScriptSrc;de.load(v.value.ownerDocument,D,i)}}),q(function(){w()!==null&&w().remove(l)}),n||(Q(function(){b||i()}),W(function(){var d;f||(h=l.getContent()),(d=w())===null||d===void 0||d.remove(l)}));var y=function(d){var m;h=l.getContent(),(m=w())===null||m===void 0||m.remove(l),t=C(C(C({},t),d),j),R(function(){return i()})};return o.expose({rerender:y,getEditor:function(){return l}}),function(){return n?fe(x,s,v,e.tagName):me(x,s,v)}}});function pe(){return J("/document")}const ge={class:"mt"},Ce={class:"mt"},be={class:"mt"},Se={class:"mt"},_e=T({__name:"Document",setup(e){const o=O({type:[],important:[],publish:[]});K(async()=>{const{data:s}=await pe();o.value=s});const t=O([-1,-1,-1]),r=(s,n,f)=>{console.log(s,n,f);const b=a.value.findIndex(k=>k.num==n);f?(console.log(b),b==-1?a.value.push({name:f,num:n}):a.value[b]={name:f,num:n}):a.value=a.value.filter(k=>k.num!=n),t.value[n]=s},a=O([]),u=s=>{a.value=a.value.filter(n=>n.num!=s),t.value[s]=-1},c=O(""),v=()=>{console.log(c.value);const s=new Blob([c.value],{type:"text/html"}),n=document.createElement("a");n.href=URL.createObjectURL(s),n.download="documnet.html",n.click(),URL.revokeObjectURL(n.href)},l=()=>{console.log(a.value.map(s=>s.name))};return(s,n)=>{const f=A("el-tag"),b=A("el-divider"),k=A("el-card"),h=A("el-button"),U=Z("permission");return g(),L(B,null,[E(k,null,{default:p(()=>[_("div",ge,[n[5]||(n[5]=_("span",{class:"title"},"文章类型：",-1)),E(f,{type:t.value[0]==-1?"primary":"info",class:"mr",onClick:n[0]||(n[0]=i=>r(-1,0,""))},{default:p(()=>n[4]||(n[4]=[S("全部")])),_:1},8,["type"]),(g(!0),L(B,null,I(o.value.type,(i,y)=>(g(),V(f,{type:t.value[0]==y?"primary":"info",class:"mr",key:i,onClick:d=>r(y,0,i)},{default:p(()=>[S(M(i),1)]),_:2},1032,["type","onClick"]))),128))]),_("div",Ce,[n[7]||(n[7]=_("span",{class:"title"},"重要程度：",-1)),E(f,{type:t.value[1]==-1?"primary":"info",class:"mr",onClick:n[1]||(n[1]=i=>r(-1,1,""))},{default:p(()=>n[6]||(n[6]=[S("全部")])),_:1},8,["type"]),(g(!0),L(B,null,I(o.value.important,(i,y)=>(g(),V(f,{type:t.value[1]==y?"primary":"info",class:"mr",key:i,onClick:d=>r(y,1,i)},{default:p(()=>[S(M(i),1)]),_:2},1032,["type","onClick"]))),128))]),_("div",be,[n[9]||(n[9]=_("span",{class:"title"},"发布渠道：",-1)),E(f,{type:t.value[2]==-1?"primary":"info",class:"mr",onClick:n[2]||(n[2]=i=>r(-1,2,""))},{default:p(()=>n[8]||(n[8]=[S("全部")])),_:1},8,["type"]),(g(!0),L(B,null,I(o.value.publish,(i,y)=>(g(),V(f,{type:t.value[2]==y?"primary":"info",class:"mr",key:i,onClick:d=>r(y,2,i)},{default:p(()=>[S(M(i),1)]),_:2},1032,["type","onClick"]))),128))]),E(b),_("div",Se,[n[10]||(n[10]=_("span",{class:"title"},"已选:",-1)),(g(!0),L(B,null,I(a.value,i=>(g(),V(f,{"disable-transitions":"",type:"success",class:"mr",closable:"",key:i,onClose:y=>u(i.num)},{default:p(()=>[S(M(i.name),1)]),_:2},1032,["onClose"]))),128))])]),_:1}),E(h,{type:"primary",class:"mt mb",onClick:v},{default:p(()=>n[11]||(n[11]=[S("导出富文本到HTML文件")])),_:1}),E(Y(ye),{modelValue:c.value,"onUpdate:modelValue":n[3]||(n[3]=i=>c.value=i),"api-key":"xvbamfm2vokka8qoim9r801qtdlldskjschd51yha7zhuusp",init:{language:"zh_CN",plugins:"lists link image table code help wordcount"}},null,8,["modelValue"]),X((g(),V(h,{type:"primary",onClick:l,class:"mt"},{default:p(()=>n[12]||(n[12]=[S("提交文章内容")])),_:1})),[[U,"user"]])],64)}}}),he=ee(_e,[["__scopeId","data-v-f90cb42f"]]);export{he as default};
